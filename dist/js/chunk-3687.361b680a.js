(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3687"],{5703:function(e,t,i){"use strict";var s=i("d795"),r=i.n(s);r.a},c05f:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"search-box"},[i("Dropdown",{staticStyle:{"margin-right":"10px"},on:{"on-click":e.showType}},[i("Button",{attrs:{type:"primary"}},[e._v("\n              "+e._s(e.searchType)+"\n              "),i("Icon",{attrs:{type:"ios-arrow-down"}})],1),i("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[i("DropdownItem",{attrs:{name:"用户名"}},[e._v("用户名")]),i("DropdownItem",{attrs:{name:"手机号"}},[e._v("手机号")])],1)],1),i("Input",{staticClass:"search-inp",staticStyle:{width:"auto"},attrs:{placeholder:"请输入"},model:{value:e.searchContent,callback:function(t){e.searchContent=t},expression:"searchContent"}}),i("Button",{staticClass:"search-btn",attrs:{type:"info"},on:{click:e.queryUserSearch}},[e._v("搜索")]),i("Button",{staticClass:"search-btn",attrs:{type:"info"},on:{click:function(t){e.modalCityFlag=!0}}},[e._v("按城市搜索")])],1),i("Table",{attrs:{loading:e.userListLoading,columns:e.userListColumns,data:e.userList,size:"large"}}),i("Page",{directives:[{name:"show",rawName:"v-show",value:e.isShowPage,expression:"isShowPage"}],staticStyle:{"margin-top":"10px"},attrs:{total:e.queryObj.totalCount,"show-total":""},on:{"on-change":e.changePage}}),i("Modal",{attrs:{title:"按城市搜索"},on:{"on-ok":function(t){e.queryUserSearch(2)},"on-cancel":e.cancelCity},model:{value:e.modalCityFlag,callback:function(t){e.modalCityFlag=t},expression:"modalCityFlag"}},[i("p",{staticStyle:{"margin-bottom":"10px"}},[e._v("\n        省：\n        "),i("Select",{staticStyle:{width:"200px"},attrs:{clearable:""},model:{value:e.province,callback:function(t){e.province=t},expression:"province"}},e._l(e.addressList["86"],function(t,s){return i("Option",{key:s,attrs:{value:s}},[e._v(e._s(t))])})),e._v("\n        必填\n      ")],1),i("p",{staticStyle:{"margin-bottom":"10px"}},[e._v("\n        市：\n        "),i("Select",{staticStyle:{width:"200px"},attrs:{clearable:""},model:{value:e.city,callback:function(t){e.city=t},expression:"city"}},e._l(e.addressList[this.province],function(t,s){return i("Option",{key:s,attrs:{value:s}},[e._v(e._s(t))])})),e._v("\n        选填\n      ")],1),i("p",{staticStyle:{"margin-bottom":"10px"}},[e._v("\n        区：\n        "),i("Select",{staticStyle:{width:"200px"},attrs:{clearable:""},model:{value:e.area,callback:function(t){e.area=t},expression:"area"}},e._l(e.addressList[this.city],function(t,s){return i("Option",{key:s,attrs:{value:s}},[e._v(e._s(t))])})),e._v("\n        选填\n      ")],1)]),i("Modal",{attrs:{title:"查看用户","mask-closable":!1,width:"800","cancel-text":""},model:{value:e.modalFlag,callback:function(t){e.modalFlag=t},expression:"modalFlag"}},[i("Tabs",{attrs:{type:"card"}},[i("TabPane",{attrs:{label:"用户地址"}},[i("Table",{attrs:{columns:e.addressColumns,data:e.addressData,size:"small"}})],1),i("TabPane",{attrs:{label:"银行卡"}},[i("Table",{attrs:{columns:e.cardColumns,data:e.cardData,size:"small"}})],1),i("TabPane",{attrs:{label:"订单记录"}},[i("Table",{attrs:{columns:e.ordersColumns,data:e.userOrders,size:"small"}}),i("Page",{staticStyle:{"margin-top":"10px"},attrs:{total:e.OrdersTotal,"page-size":8,size:"small","show-total":""},on:{"on-change":e.changeOrderPageSmall}})],1),i("TabPane",{attrs:{label:"收益明细"}},[i("Table",{attrs:{columns:e.integralsColumns,data:e.userIntegrals,size:"small"}}),i("Page",{staticStyle:{"margin-top":"10px"},attrs:{total:e.integralsTotal,"page-size":8,size:"small","show-total":""},on:{"on-change":e.changePageSmall}})],1),i("TabPane",{attrs:{label:"子级用户"}},[i("Row",[i("Col",{attrs:{span:"11"}},[i("Card",{staticStyle:{width:"300px",height:"300px",overflow:"scroll"},attrs:{title:"一级用户",padding:0,shadow:""}},[i("CellGroup",[e._l(e.viewUserTree.firstUser,function(e,t){return[i("Cell",{key:t,attrs:{title:e.username}})]})],2)],1)],1),i("Col",{attrs:{span:"11",offset:"2"}},[i("Card",{staticStyle:{width:"300px",height:"300px",overflow:"scroll"},attrs:{title:"二级用户",padding:0,shadow:""}},[i("CellGroup",[e._l(e.viewUserTree.secondUser,function(e,t){return[i("Cell",{key:t,attrs:{title:e.username}})]})],2)],1)],1)],1)],1)],1)],1),i("Modal",{attrs:{title:"编辑用户","mask-closable":!1,width:"800",okText:"关闭","cancel-text":""},model:{value:e.editModalFlag,callback:function(t){e.editModalFlag=t},expression:"editModalFlag"}},[i("p",{staticStyle:{"margin-bottom":"10px"}},[i("span",{staticStyle:{display:"inline-block",width:"60px"}},[e._v("用户名:")]),i("Input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{placeholder:"Enter something...",disabled:e.isEditUsername},model:{value:e.editUserObj.username,callback:function(t){e.$set(e.editUserObj,"username",t)},expression:"editUserObj.username"}}),i("a",{directives:[{name:"show",rawName:"v-show",value:e.isEditUsername,expression:"isEditUsername"}],on:{click:function(t){e.isEditUsername=!1}}},[e._v("修改")]),i("a",{directives:[{name:"show",rawName:"v-show",value:!e.isEditUsername,expression:"!isEditUsername"}],on:{click:function(t){e.alterUser(1)}}},[e._v("保存")])],1),i("p",{staticStyle:{"margin-bottom":"10px"}},[i("span",{staticStyle:{display:"inline-block",width:"60px"}},[e._v("手机号:")]),i("Input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{placeholder:"Enter something...",disabled:e.isEditPhone},model:{value:e.editUserObj.mobile,callback:function(t){e.$set(e.editUserObj,"mobile",t)},expression:"editUserObj.mobile"}}),i("a",{directives:[{name:"show",rawName:"v-show",value:e.isEditPhone,expression:"isEditPhone"}],on:{click:function(t){e.isEditPhone=!1}}},[e._v("修改")]),i("a",{directives:[{name:"show",rawName:"v-show",value:!e.isEditPhone,expression:"!isEditPhone"}],on:{click:function(t){e.alterUser(0)}}},[e._v("保存")])],1),i("p",{staticStyle:{"margin-bottom":"10px"}},[i("span",{staticStyle:{display:"inline-block",width:"60px"}},[e._v("增减积分:")]),i("Input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{placeholder:"Enter something...",disabled:e.isEditAmount},model:{value:e.changeAmount,callback:function(t){e.changeAmount=t},expression:"changeAmount"}}),i("a",{directives:[{name:"show",rawName:"v-show",value:e.isEditAmount,expression:"isEditAmount"}],on:{click:function(t){e.isEditAmount=!1}}},[e._v("修改")]),i("a",{directives:[{name:"show",rawName:"v-show",value:!e.isEditAmount,expression:"!isEditAmount"}],on:{click:function(t){e.alterUser(2)}}},[e._v("保存")])],1),i("p",{staticStyle:{"margin-bottom":"10px"}},[i("span",{staticStyle:{display:"inline-block",width:"60px"}},[e._v("设置代理:")]),i("RadioGroup",{model:{value:e.whichProxy,callback:function(t){e.whichProxy=t},expression:"whichProxy"}},[i("Radio",{attrs:{label:"1",disabled:e.isEditProxy}},[e._v("县区代理")]),i("Radio",{attrs:{label:"2",disabled:e.isEditProxy}},[e._v("城市代理")]),i("Radio",{attrs:{label:"3",disabled:e.isEditProxy}},[e._v("省级代理")])],1),i("a",{directives:[{name:"show",rawName:"v-show",value:e.isEditProxy,expression:"isEditProxy"}],on:{click:function(t){e.isEditProxy=!1}}},[e._v("修改")]),i("a",{directives:[{name:"show",rawName:"v-show",value:!e.isEditProxy,expression:"!isEditProxy"}],on:{click:function(t){e.alterUser(3)}}},[e._v("保存")])],1),i("p",[e._v("\n        省：\n        "),i("Select",{staticStyle:{width:"120px"},attrs:{clearable:"",disabled:e.isEditProxy},model:{value:e.proxyProvince,callback:function(t){e.proxyProvince=t},expression:"proxyProvince"}},e._l(e.addressList["86"],function(t,s){return i("Option",{key:s,attrs:{value:s}},[e._v(e._s(t))])})),e._v("  \n        市：\n        "),i("Select",{staticStyle:{width:"120px"},attrs:{clearable:"",disabled:e.isEditProxy||"3"==e.whichProxy},model:{value:e.proxyCity,callback:function(t){e.proxyCity=t},expression:"proxyCity"}},e._l(e.addressList[this.proxyProvince],function(t,s){return i("Option",{key:s,attrs:{value:s}},[e._v(e._s(t))])})),e._v("  \n        区：\n        "),i("Select",{staticStyle:{width:"120px"},attrs:{clearable:"",disabled:e.isEditProxy||"3"==e.whichProxy||"2"==e.whichProxy},model:{value:e.proxyArea,callback:function(t){e.proxyArea=t},expression:"proxyArea"}},e._l(e.addressList[this.proxyCity],function(t,s){return i("Option",{key:s,attrs:{value:s}},[e._v(e._s(t))])}))],1)])],1)},r=[],a=(i("cadf"),i("551c"),i("097d"),i("41cb")),n=i.n(a),o={name:"user_list_page",data:function(){var e=this;return{addressList:n.a,searchContent:"",province:"",city:"",area:"",proxyProvince:"",proxyCity:"",proxyArea:"",whichProxy:"1",searchType:"用户名",modalCityFlag:!1,modalFlag:!1,editModalFlag:!1,isEditUsername:!0,isEditPhone:!0,isEditAmount:!0,isEditProxy:!0,userListLoading:!0,userList:[],queryObj:{},viewUserObj:{},viewUserTree:{},editUserObj:{},changeAmount:0,isShowPage:!0,userListColumns:[{title:"序号",key:"index",width:70,align:"center",render:function(e,t){return e("div",t.row._index+1)}},{title:"用户名",key:"username"},{title:"会员等级",key:"vipLevel",render:function(e,t){return 0===t.row.vipLevel?e("div","分享大使"):1===t.row.vipLevel?e("div","经销商"):2===t.row.vipLevel?e("div","区县合伙人"):3===t.row.vipLevel?e("div","城市合伙人"):4===t.row.vipLevel?e("div","分公司"):-1===t.row.vipLevel?e("div","普通用户"):void 0}},{title:"推荐人",key:"recommendUser"},{title:"二级推荐人",key:"reRecommendUser"},{title:"代理地区",key:"proxyArea"},{title:"余额",key:"withdrawAmount"},{title:"剩余库存",key:"lastQuantity"},{title:"手机号",key:"mobile"},{title:"创建时间",key:"createTime",render:function(e,t){return e("div",{},t.row.createTime.substr(0,10))}},{title:"操作",key:"action",width:180,align:"center",render:function(t,i){return t("div",[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.queryUserByUid(i.row.uid),e.queryUnderlingUser(i.row.uid),e.modalFlag=!0}}},"查看"),t("Button",{props:{type:"warning",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.queryUserByUid(i.row.uid),e.editModalFlag=!0}}},"编辑"),t("Button",{props:{type:"error",size:"small"},on:{click:function(){e.$Modal.confirm({title:"警告",content:"确定要删除吗？",onOk:function(){e.deleteUser(i.row.uid)}})}}},"删除")])}}],addressColumns:[{title:"联系人",key:"contact",width:150},{title:"联系电话",key:"mobile",width:150},{title:"地址",key:"address",render:function(e,t){return e("div",{},t.row.province+t.row.city+t.row.area+t.row.detail)}},{title:"是否默认",key:"default",width:100,render:function(e,t){return e("div",{},1===t.row.isDefault?"是":"否")}}],addressData:[],cardColumns:[{title:"所属银行",key:"cardKind"},{title:"卡号",key:"cardId"},{title:"持卡人",key:"cardHolder"},{title:"是否默认",key:"default",width:100,render:function(e,t){return e("div",{},1===t.row.isDefault?"是":"否")}}],cardData:[],integralsColumns:[{title:"类型",key:"changeType"},{title:"积分变化",key:"integralNum"},{title:"详情",key:"changeDetail"},{title:"时间",key:"createTime",render:function(e,t){return e("div",t.row.createTime.substring(0,10)+" "+t.row.createTime.substring(11,16))}}],ordersColumns:[{title:"序号",key:"index",width:70,align:"center",render:function(e,t){return e("div",t.row._index+1)}},{title:"申请数量",width:100,key:"applicationNumber",render:function(e,t){return e("div",t.row.order.quantity+"件")}},{title:"申请时间",key:"applicationTime",render:function(e,t){return e("div",t.row.order.createTime.substring(0,10)+" "+t.row.order.createTime.substring(11,16))}},{title:"联系人",key:"contact",width:80,render:function(e,t){return e("div",t.row.userAddress.contact)}},{title:"联系电话",key:"phone",render:function(e,t){return e("div",t.row.userAddress.mobile)}},{title:"发货地址",key:"deliveryAddress",render:function(e,t){return e("div",t.row.userAddress.province+t.row.userAddress.city+t.row.userAddress.area+t.row.userAddress.detail)}},{title:"审核",key:"agree",width:80,render:function(e,t){return 1===t.row.order.isAudit?e("div","同意"):e("div","未同意")}}],userIntegrals:[],integralsTotal:0,userOrders:[],OrdersTotal:0,pageNum:1}},methods:{showModal:function(){this.modalVisible=!0},queryUser:function(){var e=this;this.$api.queryUser({pageNo:this.pageNum}).then(function(t){200===t.code?(e.userList=t.data.items,e.queryObj=t.data,e.userListLoading=!1):console.log(t)})},queryUserSearch:function(e){var t=this;this.userListLoading=!0,this.isShowPage=!1;var i={};2===e?(i.province=this.addressList["86"][this.province],i.city=this.addressList[this.province][this.city]||"",this.city?i.area=this.addressList[this.city][this.area]:i.area=""):"用户名"===this.searchType?i.username=this.searchContent:"手机号"===this.searchType&&(i.mobile=this.searchContent),this.$api.queryUserSearch(i).then(function(e){200===e.code?("[]"===JSON.stringify(e.data.users)?t.$Message.warning("用户不存在"):(t.userList=e.data.users,console.log(t.userList)),t.userListLoading=!1):(t.$Message.warning(e.message),t.userListLoading=!1)})},queryUserByUid:function(e){var t=this;this.$api.queryUserByUid({uid:e}).then(function(e){200===e.code?(t.viewUserObj=e.data.userInfo,t.editUserObj=e.data.userInfo.user,t.addressData=e.data.userInfo.userAddress,t.cardData=e.data.userInfo.userBankCard,t.queryIntegrals(),t.queryOrderByUid()):console.log(e)})},queryUnderlingUser:function(e){var t=this;this.$api.queryUnderlingUser({uid:e}).then(function(e){200===e.code?t.viewUserTree=e.data:console.log(e)})},queryIntegrals:function(e){var t=this;this.$api.queryIntegrals({uid:this.viewUserObj.user.uid,pageNo:e||1,pageSize:8}).then(function(e){200===e.code?(t.userIntegrals=e.data.items,t.integralsTotal=e.data.totalCount):console.log(e)})},queryOrderByUid:function(e){var t=this;this.$api.queryOrderByUid({uid:this.viewUserObj.user.uid,pageNo:e||1,pageSize:8}).then(function(e){200===e.code?(t.userOrders=e.data.items,t.OrdersTotal=e.data.totalCount):console.log(e)})},alterUser:function(e){var t=this,i="";if(0===e)i=this.editUserObj.mobile,this.isEditPhone=!0;else if(1===e)i=this.editUserObj.username,this.isEditUsername=!0;else if(2===e)i=this.changeAmount,this.isEditAmount=!0;else if(3===e)if("2"===this.whichProxy){if(""===this.proxyProvince||""===this.proxyCity)return this.$Message.warning("请填写完整的代理地区");i=this.addressList["86"][this.proxyProvince]+"-"+this.addressList[this.proxyProvince][this.proxyCity],this.isEditProxy=!0}else if("3"===this.whichProxy){if(""===this.proxyProvince)return this.$Message.warning("请填写完整的代理地区");i=this.addressList["86"][this.proxyProvince],this.isEditProxy=!0}else{if(""===this.proxyProvince||""===this.proxyCity||""===this.proxyArea)return this.$Message.warning("请填写完整的代理地区");i=this.addressList["86"][this.proxyProvince]+"-"+this.addressList[this.proxyProvince][this.proxyCity]+"-"+this.addressList[this.proxyCity][this.proxyArea],this.isEditProxy=!0}this.$api.alterUser({alterType:e,text:i,uid:this.editUserObj.uid}).then(function(i){200===i.code?(t.$Message.success("修改成功!"),t.queryUser()):t.$Message.error(i.message),3===e&&(t.proxyProvince="",t.proxyCity="",t.proxyArea="")})},deleteUser:function(e){var t=this;this.$api.deleteUser({uid:e}).then(function(e){200===e.code?(t.$Message.success("删除成功!"),t.queryUser()):console.log(e)})},changePage:function(e){this.userListLoading=!0,this.pageNum=e,this.queryUser()},changePageSmall:function(e){this.queryIntegrals(e)},changeOrderPageSmall:function(e){this.queryOrderByUid(e)},cancelCity:function(){},showType:function(e){this.searchType=e}},created:function(){this.queryUser()}},l=o,d=(i("5703"),i("2877")),c=Object(d["a"])(l,s,r,!1,null,null,null);c.options.__file="user-list.vue";t["default"]=c.exports},d795:function(e,t,i){}}]);